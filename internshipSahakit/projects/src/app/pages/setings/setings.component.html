<div class="flex">
  <aside class="w-64 shrink-0 bg-[#3D0F8A] text-white">
    <div class="px-6 pt-6 pb-4">
      <div class="mt-6 flex items-center gap-3">
        <div class="h-10 w-10 rounded-full bg-white/20 overflow-hidden">
          <img
            *ngIf="vm().profilePictureUrl"
            [src]="vm().profilePictureUrl"
            class="h-10 w-10 object-cover"
          />
        </div>
        <div>
          <p class="text-sm font-semibold leading-tight">{{ vm().fullName }}</p>
          <p class="text-xs text-white/70">{{ vm().roleTitle }}</p>
        </div>
      </div>
    </div>

    <nav class="mt-4 px-2 space-y-1 text-sm">
      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#ffffff"
        >
          <path
            d="M520-600v-240h320v240H520ZM120-440v-400h320v400H120Zm400 320v-400h320v400H520Zm-400 0v-240h320v240H120Zm80-400h160v-240H200v240Zm400 320h160v-240H600v240Zm0-480h160v-80H600v80ZM200-200h160v-80H200v80Zm160-320Zm240-160Zm0 240ZM360-280Z"
          />
        </svg>
        Dashboard
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#ffffff"
        >
          <path
            d="M200-200v-560 179-19 400Zm80-240h221q2-22 10-42t20-38H280v80Zm0 160h157q17-20 39-32.5t46-20.5q-4-6-7-13t-5-14H280v80Zm0-320h400v-80H280v80Zm-80 480q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v258q-14-26-34-46t-46-33v-179H200v560h202q-1 6-1.5 12t-.5 12v56H200Zm480-200q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM480-120v-56q0-24 12.5-44.5T528-250q36-15 74.5-22.5T680-280q39 0 77.5 7.5T832-250q23 9 35.5 29.5T880-176v56H480Z"
          />
        </svg>
        Contact Record
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#ffffff"
        >
          <path
            d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"
          />
        </svg>
        Company Record
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#FFFFFF"
        >
          <path
            d="M480-80q-24 0-46-9t-39-26q-29-29-50-38t-63-9q-50 0-85-35t-35-85q0-42-9-63t-38-50q-17-17-26-39t-9-46q0-24 9-46t26-39q29-29 38-50t9-63q0-50 35-85t85-35q42 0 63-9t50-38q17-17 39-26t46-9q24 0 46 9t39 26q29 29 50 38t63 9q50 0 85 35t35 85q0 42 9 63t38 50q17 17 26 39t9 46q0 24-9 46t-26 39q-29 29-38 50t-9 63q0 50-35 85t-85 35q-42 0-63 9t-50 38q-17 17-39 26t-46 9Zm0-80q8 0 15.5-3.5T508-172q41-41 77-55.5t93-14.5q17 0 28.5-11.5T718-282q0-58 14.5-93.5T788-452q12-12 12-28t-12-28q-41-41-55.5-77T718-678q0-17-11.5-28.5T678-718q-58 0-93.5-14.5T508-788q-5-5-12.5-8.5T480-800q-8 0-15.5 3.5T452-788q-41 41-77 55.5T282-718q-17 0-28.5 11.5T242-678q0 58-14.5 93.5T172-508q-12 12-12 28t12 28q41 41 55.5 77t14.5 93q0 17 11.5 28.5T282-242q58 0 93.5 14.5T452-172q5 5 12.5 8.5T480-160Zm100-160q25 0 42.5-17.5T640-380q0-25-17.5-42.5T580-440q-25 0-42.5 17.5T520-380q0 25 17.5 42.5T580-320Zm-202-2 260-260-56-56-260 260 56 56Zm2-198q25 0 42.5-17.5T440-580q0-25-17.5-42.5T380-640q-25 0-42.5 17.5T320-580q0 25 17.5 42.5T380-520Zm100 40Z"
          />
        </svg>
        Deal Tracking
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#FFFFFF"
        >
          <path
            d="M440-520 120-720v400h400v80H120q-33 0-56.5-23.5T40-320v-480q0-33 23.5-56.5T120-880h640q33 0 56.5 23.5T840-800v200h-80v-120L440-520Zm0-80 320-200H120l320 200ZM760-80q-66 0-113-47t-47-113v-180q0-42 29-71t71-29q42 0 71 29t29 71v180h-80v-180q0-8-6-14t-14-6q-8 0-14 6t-6 14v180q0 33 23.5 56.5T760-160q33 0 56.5-23.5T840-240v-160h80v160q0 66-47 113T760-80ZM120-720v-80 480-400Z"
          />
        </svg>
        Email Templates
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#FFFFFF"
        >
          <path
            d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h167q11-35 43-57.5t70-22.5q40 0 71.5 22.5T594-840h166q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560h-80v120H280v-120h-80v560Zm280-560q17 0 28.5-11.5T520-800q0-17-11.5-28.5T480-840q-17 0-28.5 11.5T440-800q0 17 11.5 28.5T480-760Z"
          />
        </svg>
        Reporting
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#FFFFFF"
        >
          <path
            d="M80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"
          />
        </svg>
        Team chat room
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#FFFFFF"
        >
          <path
            d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h480q33 0 56.5 23.5T720-720v180l160-160v440L720-420v180q0 33-23.5 56.5T640-160H160Zm0-80h480v-480H160v480Zm0 0v-480 480Z"
          />
        </svg>
        Team video room
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#FFFFFF"
        >
          <path
            d="M480-540ZM80-160v-80h400v80H80Zm120-120q-33 0-56.5-23.5T120-360v-360q0-33 23.5-56.5T200-800h560q33 0 56.5 23.5T840-720H200v360h280v80H200Zm600 40v-320H640v320h160Zm-180 80q-25 0-42.5-17.5T560-220v-360q0-25 17.5-42.5T620-640h200q25 0 42.5 17.5T880-580v360q0 25-17.5 42.5T820-160H620Zm100-300q13 0 21.5-9t8.5-21q0-13-8.5-21.5T720-520q-12 0-21 8.5t-9 21.5q0 12 9 21t21 9Zm0 60Z"
          />
        </svg>
        Services
      </a>

      <!-- Active -->
      <div class="pt-2">
        <a
          class="flex items-center gap-3 rounded-lg px-4 py-2 bg-white/15"
          href="#"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#FFFFFF"
          >
            <path
              d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"
            />
          </svg>
          Settings
        </a>
      </div>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-question-circle"
          viewBox="0 0 16 16"
        >
          <path
            d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"
          />
          <path
            d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286m1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94"
          />
        </svg>
        Help/Support
      </a>

      <a
        class="flex items-center gap-3 rounded-lg px-4 py-2 hover:bg-white/10"
        href="#"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-4 w-4"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1"
          />
        </svg>
        Logout
      </a>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="flex-1">
    <!-- Topbar -->
    <div class="flex items-center gap-4 border-b px-6 py-4">
      <div class="relative max-w-xl flex-1">
        <input
          type="text"
          placeholder="Search"
          class="w-full rounded-lg border px-4 py-2.5 text-sm outline-none focus:ring-4 focus:ring-indigo-100"
        />
        <span
          class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2"
        >
          <svg
            viewBox="0 0 24 24"
            class="h-4 w-4"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="11" cy="11" r="7"></circle>
            <path d="M21 21l-4.3-4.3"></path>
          </svg>
        </span>
      </div>

      <div class="ml-auto flex items-center gap-3">
        <div class="h-8 w-8 rounded-full bg-gray-200 overflow-hidden">
          <img
            *ngIf="vm().profilePictureUrl"
            [src]="vm().profilePictureUrl"
            class="h-8 w-8 object-cover"
          />
        </div>
        <span class="text-sm font-medium">{{ vm().fullName }}</span>
      </div>
    </div>

    <!-- Page title -->
    <div class="px-8 pt-8">
      <div class="flex items-start justify-between gap-4 pb-4">
        <!-- Left: title -->
        <div>
          <h1 class="text-2xl font-bold text-gray-900">Settings</h1>
          <p class="mt-1 text-sm text-gray-500">
            Lorem ipsum dolor sit amet consectetur.
          </p>
        </div>

        <div class="flex items-center gap-3">
          <button
            class="rounded-full border border-[#5B34EA]/40 px-5 py-2.5 text-sm font-medium text-[#5B34EA] hover:bg-[#5B34EA]/5 active:scale-[.99] transition"
            (click)="onCancel()"
          >
            Cancel
          </button>

          <button
            class="rounded-full bg-gradient-to-r from-[#6D5AE6] via-[#5B34EA] to-[#3E2CCB] px-5 py-2.5 text-sm font-semibold text-white shadow-sm ring-1 ring-black/5 hover:brightness-105 active:scale-[.99] transition disabled:opacity-60 disabled:cursor-not-allowed"
            [disabled]="saving()"
            (click)="onSave()"
          >
            {{ saving() ? "Saving…" : "Save Changes" }}
          </button>
        </div>
      </div>
    </div>

    <div class="px-8 py-6">
      <div class="grid grid-cols-12 gap-8">
        <div class="col-span-3">
          <div class="rounded-xl border">
            <ul class="p-2 text-sm">
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left font-medium bg-indigo-50 text-indigo-700"
                >
                  General Information
                </button>
              </li>
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left hover:bg-gray-50"
                >
                  Preferences
                </button>
              </li>
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left hover:bg-gray-50"
                >
                  Security
                </button>
              </li>
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left hover:bg-gray-50"
                >
                  Notifications
                </button>
              </li>
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left hover:bg-gray-50"
                >
                  Account
                </button>
              </li>
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left hover:bg-gray-50"
                >
                  Account Manager
                </button>
              </li>
              <li>
                <button
                  class="w-full rounded-lg px-3 py-2 text-left hover:bg-gray-50"
                >
                  Billings
                </button>
              </li>
            </ul>
          </div>
        </div>

        <div class="col-span-9">
          <div class="rounded-xl border">
            <div class="border-b px-6 py-4">
              <h2 class="text-lg font-semibold">General Information</h2>
              <p class="text-sm text-gray-500">
                Lorem ipsum dolor sit amet consectetur.
              </p>
            </div>

            <div class="px-6 py-6 space-y-8">
              <section>
                <h3 class="text-sm font-semibold text-gray-700">
                  Profile picture upload
                </h3>

                <div class="mt-3 flex items-center gap-4">
                  <div
                    class="h-14 w-14 rounded-full bg-gray-200 overflow-hidden"
                  >
                    <img
                      *ngIf="vm().profilePictureUrl"
                      [src]="vm().profilePictureUrl"
                      class="h-14 w-14 object-cover"
                    />
                  </div>
                  <div class="flex-1">
                    <p class="text-sm font-medium leading-tight">
                      {{ vm().fullName }}
                    </p>
                    <p class="text-xs text-gray-500 leading-tight">
                      {{ vm().roleTitle }}
                    </p>
                    <p class="text-xs text-gray-500 leading-tight">
                      {{ vm().location }}
                    </p>
                  </div>
                  <div class="flex items-center gap-2">
                    <label
                      class="rounded-lg bg-[#5B34EA] px-4 py-2 text-sm font-medium text-white hover:bg-[#4526c7] cursor-pointer"
                    >
                      Upload New Photo
                      <input
                        type="file"
                        class="hidden"
                        (change)="onUploadPhoto($event)"
                      />
                    </label>
                    <button
                      class="rounded-lg border px-4 py-2 text-sm hover:bg-gray-50"
                      (click)="onDeletePhoto()"
                    >
                      Delete
                    </button>
                  </div>
                </div>
              </section>

              <section class="space-y-4">
                <h3 class="text-sm font-semibold text-gray-700">
                  Organization Information
                </h3>

                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >Business Name</label
                    >
                    <input
                      name="businessName"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().businessName"
                      (ngModelChange)="onFieldChange('businessName', $event)"
                      #businessName="ngModel"
                      required
                      minlength="2"
                      maxlength="80"
                      autocomplete="organization"
                    />

                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="
                        businessName.invalid &&
                        (businessName.dirty || businessName.touched)
                      "
                    >
                      @if (businessName.errors?.['required']) { Required. } @if
                      (businessName.errors?.['minlength']) { Minimum 2
                      characters. } @if (businessName.errors?.['maxlength']) {
                      Maximum 80 characters. }
                    </p>
                  </div>

                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >Email Address</label
                    >
                    <input
                      name="emailAddress"
                      type="email"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().emailAddress"
                      (ngModelChange)="onFieldChange('emailAddress', $event)"
                      #emailAddress="ngModel"
                      required
                      email
                      maxlength="120"
                      autocomplete="email"
                    />

                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="
                        emailAddress.invalid &&
                        (emailAddress.dirty || emailAddress.touched)
                      "
                    >
                      @if (emailAddress.errors?.['required']) { Required. } @if
                      (emailAddress.errors?.['email']) { Invalid email format. }
                      @if (emailAddress.errors?.['maxlength']) { Maximum 120
                      characters. }
                    </p>
                  </div>

                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >Phone Number</label
                    >
                    <input
                      name="phoneNumber"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().phoneNumber"
                      (ngModelChange)="onFieldChange('phoneNumber', $event)"
                      #phoneNumber="ngModel"
                      required
                      pattern="^[0-9+\-() ]{9,20}$"
                      inputmode="tel"
                      autocomplete="tel"
                    />

                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="
                        phoneNumber.invalid &&
                        (phoneNumber.dirty || phoneNumber.touched)
                      "
                    >
                      @if (phoneNumber.errors?.['required']) { Required. } @if
                      (phoneNumber.errors?.['pattern']) { Digits/()+- allowed,
                      9–20 chars. }
                    </p>
                  </div>

                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >Fax</label
                    >
                    <input
                      name="fax"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().fax"
                      (ngModelChange)="onFieldChange('fax', $event)"
                      #fax="ngModel"
                      pattern="^[0-9+\-() ]{9,20}$"
                      inputmode="tel"
                      autocomplete="tel"
                    />

                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="fax.invalid && (fax.dirty || fax.touched)"
                    >
                      @if (fax.errors?.['pattern']) { Digits/()+- allowed, 9–20
                      chars. }
                    </p>
                  </div>
                </div>
              </section>

              <section class="space-y-4 mt-6">
                <h3 class="text-sm font-semibold text-gray-700">Address</h3>
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >Country</label
                    >
                    <div class="relative">
                      <select
                        name="country"
                        class="w-full appearance-none rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                        [ngModel]="vm().country"
                        (ngModelChange)="onFieldChange('country', $event)"
                        #country="ngModel"
                        required
                        autocomplete="country-name"
                      >
                        <option *ngFor="let c of countries" [ngValue]="c.code">
                          {{ c.label }}
                        </option>
                      </select>
                      <span
                        class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2"
                      >
                        <svg
                          viewBox="0 0 20 20"
                          class="h-4 w-4"
                          fill="currentColor"
                        >
                          <path d="M10 12l-4-4h8l-4 4z" />
                        </svg>
                      </span>
                    </div>
                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="
                        country.invalid && (country.dirty || country.touched)
                      "
                    >
                      Required.
                    </p>
                  </div>

                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >City</label
                    >
                    <input
                      name="city"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().city"
                      (ngModelChange)="onFieldChange('city', $event)"
                      #city="ngModel"
                      required
                      minlength="2"
                      maxlength="80"
                      autocomplete="address-level2"
                    />
                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="city.invalid && (city.dirty || city.touched)"
                    >
                      @if (city.errors?.['required']) { Required. } @if
                      (city.errors?.['minlength']) { Minimum 2 characters. } @if
                      (city.errors?.['maxlength']) { Maximum 80 characters. }
                    </p>
                  </div>

                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >Postcode</label
                    >
                    <input
                      name="postcode"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().postcode"
                      (ngModelChange)="onFieldChange('postcode', $event)"
                      #postcode="ngModel"
                      required
                      [attr.pattern]="postcodePattern"
                      inputmode="numeric"
                      maxlength="5"
                      autocomplete="postal-code"
                    />

                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="
                        postcode.invalid && (postcode.dirty || postcode.touched)
                      "
                    >
                      @if (postcode.errors?.['required']) { Required. } @if
                      (postcode.errors?.['pattern']) { Must be exactly 5 digits.
                      }
                    </p>
                  </div>

                  <div>
                    <label class="block text-xs font-medium text-gray-500 mb-1"
                      >State</label
                    >
                    <input
                      name="state"
                      class="w-full rounded-lg border px-3 py-2 text-sm focus:ring-4 focus:ring-indigo-100 outline-none"
                      [ngModel]="vm().state"
                      (ngModelChange)="onFieldChange('state', $event)"
                      #state="ngModel"
                      maxlength="80"
                      autocomplete="address-level1"
                    />
                    <p
                      class="mt-1 text-xs text-red-600"
                      *ngIf="state.invalid && (state.dirty || state.touched)"
                    >
                      @if (state.errors?.['maxlength']) { Maximum 80
                      characters.}
                    </p>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
